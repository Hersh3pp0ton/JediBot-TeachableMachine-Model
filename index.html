<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Riconoscimento Mano</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image"></script>
</head>
<body>
    <h1>Hand Recognition</h1>
    <video id="webcam" width="300" height="300" autoplay></video>
    <p id="result">Aspettando...</p>

    <script>
        const URL = "https://hersh3pp0ton.github.io/JediBot-TeachableMachine-Model/"; // Cambia con il tuo URL!

        let model, webcam;
        async function init() {
            model = await tmImage.load(URL + "model.json", URL + "metadata.json");
            webcam = document.getElementById("webcam");

            navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
                webcam.srcObject = stream;
            });

            predict();
        }

        async function predict() {
            const prediction = await model.predict(webcam.video);
            let maxIndex = prediction.findIndex(p => p.probability === Math.max(...prediction.map(p => p.probability)));
            let result = prediction[maxIndex].className;
            
            document.getElementById("result").innerText = "Riconosciuto: " + result;
            
            if (window.AppInventor) {
                AppInventor.setWebViewString(result);
            }

            setTimeout(predict, 500);
        }

        window.onload = init;
    </script>
</body>
</html>

